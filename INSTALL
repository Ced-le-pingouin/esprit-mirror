Installation d'Esprit

----------------------------------------------------------------------
PRÉREQUIS

- Apache
- PHP4 avec browscap.ini (pour l'identification des navigateurs)
- MySQL 4 (non testé avec MySQL 5)

----------------------------------------------------------------------
CONFIGURATION DU SERVEUR WEB

Le répertoire src/ d'Esprit doit être placé sur le serveur web.  Le
serveur web doit pouvoir accèder à ces fichiers, il peut donc être
nécessaire de changer leur propriétaire à "nobody" ou "www-data" selon
la configuration du serveur.

Dans le cas où les fichiers seraient placés hors du serveur, il est
nécessaire d'utiliser un Virtual Host. Un lien symbolique ne suffit
pas. Voir l'ANNEXE A ci-dessous.

----------------------------------------------------------------------
INSTALLATION AUTOMATIQUE

----------------------------------------------------------------------
INSTALLATION MANUELLE

Pour que la plate-forme soit opérationnelle, voilà la marche à suivre :

1) créer une base de données (BdD) vide, par ex... esprit :-) .

2) créer les tables et insérer les données par défaut, en exécutant
dans cette BdD les fichiers suivants, se trouvant dans les sources
d'Esprit, dans l'ordre :
 - dist/sql/database.mysql ;
 - dist/sql/commun/ : tous les fichiers .sql , sauf ceux dont le nom
     débute par i18n, qui ne fonctionnent pas ;
 - dist/sql/esprit/Projet.sql .

3) créer un user MySQL qui a les droits sur la BdD
(select/insert/update/delete/lock devraient suffire).

4) faire une copie du fichier ./setup/config.inc.dist sous le nom
"./src/include/config.inc", et modifier les user et mot de passe pour
permettre l'accès à la BdD esprit (donc les user/mot de passe créés en
(3) ). Il y a une deuxième mention à un couple user/mot de passe dans
ce fichier, il s'agit de l'accès root, mais il n'est pas nécessaire
sauf si on utilise un outil particulier appelé "transfert", dans la
plate-forme.

5) créer un sous-répertoire "tmp" dans la racine de la plate-forme
Esprit, ainsi qu'un fichier vide nommé "mdpncpte", non lisible au
niveau des droits d'accès, mais avec au moins l'accès en écriture pour
le php/webserver.

6) voilà, maintenant, si on se rend avec le navigateur sur l'url
localhost/esprit/ (par ex.), le login par défaut est "admin", et le
mot de passe "mdp".

7) une fois entré en admin, on peut créer une formation de test, en
cliquant sur "Outils", qui se trouve dans la barre inférieure du site,
puis en se rendant de l'outil de conception de cours eConcept.

----------------------------------------------------------------------
ANNEXE A : VIRTUAL HOST

Pour établir un virtual host qui déclarerait le répertoire
/home/esprit/src comme serveur autonome nommé esprit.domaine.org, on
peut suivre la procédure suivante.

 - Insérer à la fin du fichier httpd.conf d'Apache le texte :
NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1>
    DocumentRoot /var/www/
    ServerName localhost
</VirtualHost>
<VirtualHost 127.0.0.1>
#    ServerAdmin webmaster@host.domaine.org
    DocumentRoot /home/esprit/src/
    ServerName esprit.local
#    ErrorLog logs/host.domaine.org-error.log
</VirtualHost>

 - Déclarer un alias esprit.domaine.com vers la machine réelle.
Soit en modifiant les fichiers hosts des machines concernées pour y
insérer "XXX.XXX.XXX.XXX esprit esprit.domaine.org".
Soit en modifiant le DNS.

 - Redémarrer le serveur Apache.
