Installation d'Esprit

----------------------------------------------------------------------
PRÉREQUIS

- Apache v1.3 au moins
- PHP4 avec browscap.ini (pour l'identification des navigateurs)
- MySQL 4 (non testé avec MySQL 5)

----------------------------------------------------------------------
CONFIGURATION DU SERVEUR WEB

Le répertoire src/ d'Esprit doit être placé sur le serveur web.  Le
serveur web doit pouvoir accèder à ces fichiers, il peut donc être
nécessaire de changer leur propriétaire à "nobody" ou "www-data" selon
la configuration du serveur.

Dans le cas où les fichiers seraient placés hors du serveur, il est
nécessaire d'utiliser un Virtual Host. Un lien symbolique ne suffit
pas. Voir l'ANNEXE A ci-dessous.

----------------------------------------------------------------------
INSTALLATION AUTOMATIQUE

Rendez-vous avec  votre navigateur à l'adresse : 
http://mon_site/repertoire__esprit/installation/installation.php
Suivez la procédure d'installation.

----------------------------------------------------------------------
INSTALLATION MANUELLE

Pour que la plate-forme soit opérationnelle, voilà la marche à suivre :

1) créer une base de données (BdD) vide, par ex... esprit :-).
Par exemple, avec PhpMyAdmin, ou directement dans le terminal mysql :
  CREATE DATABASE esprit ;

2) créer les tables et insérer les données par défaut, en exécutant
dans cette BdD les fichiers suivants, se trouvant dans les sources
d'Esprit (src/install/sql), dans l'ordre :
  1_structure.sql
  2_Permission.sql 
  2_Personne.sql    
  2_Projet_Admin.sql   
  2_Statut_Permission.sql  
  2_TypeSousActiv.sql    
  2_TypeStatutPers.sql  
  3_esprit-projet.sql

3) créer un utilisateur MySQL qui a les droits sur la BdD
(select/insert/update/delete/lock devraient suffire).

4) faire une copie du fichier ./setup/config.inc.dist sous le nom
"./src/include/config.inc", et modifier les variables utilisateur et 
mot de passe pour permettre l'accès à la BdD esprit, en utilisant 
les valeurs définies en 3) :
  $g_sNomProprietaire = "utilisateur";
  $g_sMotDePasse = "mot_de_passe";                  

Il y a une deuxième mention d'un couple uitilisateur/mot de passe dans
ce fichier : il s'agit de l'accès root, mais il n'est pas nécessaire
sauf si on utilise un outil particulier appelé "transfert", dans la
plate-forme.

5) créer un sous-répertoire "tmp" dans la racine de la plate-forme
Esprit, ainsi qu'un fichier vide nommé "mdpncpte", non lisible au
niveau des droits d'accès, mais avec au moins l'accès en écriture pour
le php/webserver.

6) voilà, maintenant, si on se rend avec le navigateur sur l'url
localhost/esprit/ (par ex.), le login par défaut est "admin", et le
mot de passe "mdp".

7) une fois entré en admin, on peut créer une formation de test, en
cliquant sur "Outils", qui se trouve dans la barre inférieure du site,
puis en se servant de l'outil de conception de cours eConcept.



----------------------------------------------------------------------
ANNEXE A : VIRTUAL HOST

Pour établir un virtual host qui déclarerait le répertoire
/home/esprit/src comme serveur autonome nommé esprit.domaine.org, 
on peut suivre la procédure suivante.

 - Insérer à la fin du fichier httpd.conf d'Apache le bloc :

  NameVirtualHost * 
  <VirtualHost *>
      DocumentRoot /var/www/
      ServerName www.domaine.org
  </VirtualHost>
  <VirtualHost *>
  #    ServerAdmin webmaster@host.domaine.org
      DocumentRoot /home/esprit/src/
      ServerName esprit.domaine.org
  #    ErrorLog logs/host.domaine.org-error.log
  </VirtualHost>

 - Déclarer un alias esprit.domaine.org vers la machine réelle.
Soit en modifiant les fichiers hosts des machines clientes concernées 
pour y insérer "XXX.XXX.XXX.XXX esprit esprit.domaine.org".
Soit en modifiant le serveur DNS pour ajouter un alias.

 - Redémarrer le serveur Apache.
